# True color settings

# Italic font support
set -g default-terminal "tmux-256color"
set-option -ga terminal-overrides ",xterm-256color:Tc"

unbind C-b
# Ctrl + Space
set-option -g prefix C-Space
# Alt + Space
# set-option -g prefix M-Space
bind-key C-Space send-prefix

# split panes using | and -
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

# bind -n M-H previous-window
# bind -n M-L next-window

# Bind Prefix+[ to move to the previous window
bind-key [ previous-window

# Bind Prefix+] to move to the next window
bind-key ] next-window

# Switch panes and windows using Vim bindings
setw -g mode-keys vi
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# Easy config reload on <prefix> + r
bind-key r source-file ~/.config/tmux/tmux.conf

# Select windows easier by not requiring to hit Ctrl+Space but rather Ctrl alone 
# TODO: Make it work
# bind-key -n A-1 select-window -t 1
# bind-key -n A-2 select-window -t 2
# bind-key -n A-3 select-window -t 3
# bind-key -n A-4 select-window -t 4
# bind-key -n A-5 select-window -t 5
# bind-key -n A-6 select-window -t 6
# bind-key -n A-7 select-window -t 7
# bind-key -n A-8 select-window -t 8
# bind-key -n A-9 select-window -t 9

set -s set-clipboard on

# set status bar position to be on top rather on bottom
set-option -g status-position top 
# Center the tabs
# set-option -g status-justify centre
# set-environment -g TMUX_PLUGIN_MANAGER_PATH '~/.config/tmux/plugins/'
# Enable mouse mode (tmux 2.1 and above)
set -g mouse on

# Start windows and panes at 1, not 0 since it's hard to reach on the keyboard
set -g base-index 1
set -g pane-base-index 1

# Make the bar transparent

# rename windows automatically
set-option -g automatic-rename on 
# also reorder them automatically, when f.e. window 4 is being deleted, but 5 and 6 exists
set-option -g renumber-windows on


# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'omerxx/tmux-sessionx'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'jaclu/tmux-menus'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'trevarj/tmux-open-nvim'
set -g @plugin 'tmux-plugins/tmux-sidebar'
set -g @plugin 'tmux-plugins/tmux-copycat'
set -g @plugin 'wfxr/tmux-fzf-url'
set -g @plugin 'xamut/tmux-weather'
set -g @plugin 'vascomfnunes/tmux-clima'
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'omerxx/tmux-floax'
set -g @plugin 'kenos1/tmux-cht-sh'
set -g @plugin 'joshmedeski/tmux-nerd-font-window-name'
set -g @plugin 'samoshkin/tmux-plugin-sysstat'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-battery'
# set -g @plugin 'thewtex/tmux-mem-cpu-load'
# set -g @plugin 'tmux-plugins/tmux-continuum'

# Themes
# set -g @plugin 'niksingh710/minimal-tmux-status'
set -g @plugin 'catppuccin/tmux'
#---
# set -g @plugin '2kabhishek/tmux2k'
# set -g @tmux2k-theme 'catppuccin'
# set -g @tmux2k-theme 'duo'
#---


# maybe some other time
# set -g @plugin 'joshmedeski/tmux-nerd-font-window-name'

# --- tmux-sidebar config ---
# set -g @sidebar-tree-command 'lsd'
# set the shortcut to (Ctrl+Space) + e
# set -g @sidebar-tree 'e'
# set -g @sidebar-tree-focus 'E'
# set -g @sidebar-tree-pager 'less'
# set -g @sidebar-tree-command 'tree -C'
# set -g @sidebar-tree-width '60'
# ---

# --- tmux-fzf-url config ---
set -g @fzf-url-history-limit '2000'
# ----

# --- tmux-fzf config --- 
# setup the launch shortcut to Ctrl + F
TMUX_FZF_LAUNCH_KEY="f"
# setup the options
TMUX_FZF_OPTIONS="-p -w 62% -h 60% -m"
TMUX_FZF_PANE_FORMAT="[#{window_name}] #{pane_current_command}  [#{pane_width}x#{pane_height}] [history #{history_size}/#{history_limit}, #{history_bytes} bytes] #{?pane_active,[active],[inactive]}"
# ---

# --- yazi specifics ---
set -g allow-passthrough on
set -ga update-environment TERM
set -ga update-environment TERM_PROGRAM
# ---

# --- tmux-resurrect config ---
# ---

# Enable neovim restore
set -g @resurrect-strategy-nvim 'session'
set -g @resurrect-capture-pane-contents 'off'
# Enable continuum for autosaving
# set -g @continuum-restore 'on'
# ----------------------------

# --- Session-X config --- 

# I recommend using `o` if not already in use, for least key strokes when launching
set -g @sessionx-bind 'o'

# Open new tmux window with a file to open in nvim
set -g @ton-open-strategy ":e"


# --- TMUX SESSION X ---

# A comma delimited absolute-paths list of custom paths
# always visible in results and ready to create a session from.
# Tip: if you're using zoxide mode, there's a good chance this is redundant
# set -g @sessionx-custom-paths "
#   zshrc, \
#   sketchybar, \
#   tmux, \
#   nvim, \
#   second-brain, \
#   perfexim, \
#   wamt-crm, \
#   volta, \
#   bodzio, \
#   mccom-new-website, \
#   cezar, \
#   ntnm, \
#   bejot, \
#   jm/, \
#   mogado, \
#   ntnm, \
#   wamtechnik 
# "

# By default, the current session will not be shown on first view
# This is to support quick switch of sessions
# Only after other actions (e.g. rename) will the current session appear
# Setting this option to 'false' changes this default behavior
set -g @sessionx-filter-current 'false'
# -------------------------


# Catpuccin theme
set -g @catppuccin_status_justify "right"
# set -g @catppuccin_status_modules_right "... battery ..." 

set -g @catppuccin_status_modules_left "session"
set -g @catppuccin_status_modules_right "date_time"

# set -g @catppuccin_status_background "theme"

set -g @catppuccin_window_left_separator "█"
set -g @catppuccin_window_middle_separator "█ "
set -g @catppuccin_window_right_separator "█"
# set -g @catppuccin_window_number_position "left"
# set -g @catppuccin_window_default_fill "number"
# set -g @catppuccin_window_current_fill "number"
set -g @catppuccin_window_current_text "#{pane_current_path}"
# set -g @catppuccin_status_modules_right "date_time #{sysstat_cpu} #{sysstat_mem} #{sysstat_swap} #{sysstat_loadavg}"
set -g @catppuccin_status_left_separator  " "
set -g @catppuccin_status_right_separator " "
set -g @catppuccin_window_status "yes"
set -g @catppuccin_icon_window_last "󰖰"
set -g @catppuccin_icon_window_current "󰖯"
set -g @catppuccin_icon_window_zoom "󰁌"
set -g @catppuccin_icon_window_mark "󰃀"
set -g @catppuccin_icon_window_silent "󰂛"
set -g @catppuccin_icon_window_activity "󱅫"
set -g @catppuccin_icon_window_bell "󰂞"
set -g @catppuccin_status_fill "icon"
# set -g @catppuccin_status_fill "all"
# set -g @catppuccin_status_connect_separator "yes"
# set -g @catppuccin_gitmux_text "#(gitmux \"#{pane_current_path}\")"
# set -g @catppuccin_window_default_text "#{b:pane_current_path}" # use "#W" for application instead of directory
# Catpuccin Colors
set -g @catppuccin_window_current_color "#FDBFE9" # text color
set -g @catppuccin_menu_selected_style "fg=#{thm_gray},bg=#{thm_yellow}" # Use a value compatible with the standard tmux `menu-selected-style`


# Custom Italic Styles for Catppuccin (overrides)
# TODO: Make it work for best effect - maybe format the window title or something (and make it italic ofc)
# set -g @catppuccin_window_current_text "#[italics] #T"
# set -g @catppuccin_window_default_text "#[italics] #T"
# set -g @catppuccin_window_not_current_style "fg=#D2A5FD,italics"
# set -g @catppuccin_window_default_background "#181727"
# set -g @catppuccin_status_background "transparent"

# Set the italic style for window numbers
# set -g @catppuccin_window_current_style "fg=#FDBCEB,bg=#202020,italics"
# set -g @catppuccin_window_default_style "fg=#FDBCEB,italics"



# --- tmux2k themes --- 
# use a theme
# set -g @tmux2k-theme 'gruvbox'
# set -g @tmux2k-theme 'catppuccin'

# set the left and right plugin sections
# set -g @tmux2k-left-plugins "cpu gpu ram git"
# set -g @tmux2k-right-plugins "weather battery network time"

# to customize plugin colors
# set -g @tmux2k-[plugin-name]-colors "[background] [foreground]"
# set -g @tmux2k-cpu-colors "red black" # set cpu plugin bg to red, fg to black

# to enable compact window list size
# set -g @tmux2k-compact-windows true

# change refresh rate
# set -g @tmux2k-refresh-rate 5

# weather scale
# set -g @tmux2k-show-fahrenheit false

# 24 hour time
# set -g @tmux2k-military-time true

 # network interface to watch
# set -g @tmux2k-network-name "wlo1"

# to show icons only
# set -g @tmux2k-icons-only true 

# to customize duo bg and fg
# set -g @tmux2k-duo-fg "#1688f0" # this will get you duo blue shown above
# set -g @tmux2k-duo-bg "#000000" # this will set the bg for duo theme

# to set powerline symbols
# set -g @tmux2k-right-sep  # alternate right status bar sep
# set -g @tmux2k-win-right-sep  # alternate window right sep
#
# # to not show powerline
# set -g @tmux2k-show-powerline true 
#
# # set start icon, accepts: `session`, 'window`, or any string
# set -g @tmux2k-start-icon ""
#
# set -g @tmux2k-fixed-location "Sosnowiec"

# ---

# add this hook to your tmux.conf
# if the session changes we send an event to sketchybar
set-hook -g client-session-changed  'run-shell "sketchybar --trigger tmux_session_update"'





# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.config/tmux/plugins/tpm/tpm'
